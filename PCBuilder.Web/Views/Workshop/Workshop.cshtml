@using PCBuilder.Services.ComponentsAPI.DTOs
@model WorkshopViewModel

<div class="card shadow border-0 mt-4">
    <div class="card-header border-dark-subtle bg-light bg-gradient ml-0 py-3">
        <div class="row">
            <div class="col-12 text-center">
                <h1 class="text-black">Workshop</h1>
            </div>
        </div>
    </div>
    <div class="card-body p-4">
        <h3>Senaste kundordrar</h3>
        <table class="table table-borderless table-hover table-responsive">
            <thead>
                <tr>
                    <th>OrderId</th>
                    <th>Kundnamn</th>
                    <th>Beställd Dator</th>
                    <th>Status</th>
                    <th>Bygg</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var order in Model.RecentCustomerOrders)
                {
                    <tr>
                        <td>@order.Id</td>
                        <td>@order.CustomerName</td>
                        <td>@order.ComputerName</td>
                        <td>@order.Status</td>
                        <td>
                            <a asp-action="BuildComputer" asp-route-orderId="@order.Id" class="btn btn-success">Bygg denna dator</a>
                        </td>
                    </tr>
                }
            </tbody>
        </table>

        <hr />
        <h3>Välj kund för att bygga dator</h3>
        <form asp-action="SelectCustomerToBuild" method="get" class="form-inline">
            <div class="form-group mb-2">
                <label for="customerId" class="mr-2">Kund:</label>
                <select id="customerId" name="customerId" class="form-control mr-2">
                    @foreach (var customer in Model.Customers)
                    {
                        <option value="@customer.Id">@customer.Name</option>
                    }
                </select>
                <button type="submit" class="btn btn-primary">Bygg dator åt kund</button>
            </div>
        </form>

        <hr />
        <h3>Datorer du har byggt</h3>
        <table class="table table-borderless table-hover table-responsive">
            <thead>
                <tr>
                    <th>DatorId</th>
                    <th>Kund</th>
                    <th>Skapad</th>
                    <th>Status</th>
                    <th>Redigera</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var built in Model.BuiltComputers)
                {
                    <tr>
                        <td>@built.Id</td>
                        <td>@built.CustomerName</td>
                        <td>@built.CreatedAt.ToShortDateString()</td>
                        <td>@built.Status</td>
                        <td>
                            <a asp-action="EditBuiltComputer" asp-route-id="@built.Id" class="btn btn-warning">Redigera</a>
                        </td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</div>